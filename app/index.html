<!doctype html>
<html class="no-js">
  <head>
    <meta charset="utf-8">
    <title>dronihil</title>
    <meta name="description" content="">
    <meta name="viewport" content="width=device-width">
    <link rel="shortcut icon" href="/favicon.ico">
    <!-- Place favicon.ico and apple-touch-icon.png in the root directory -->
    <!-- build:css(.) styles/vendor.css -->
    <!-- bower:css -->
    <link rel="stylesheet" href="bower_components/bootstrap/dist/css/bootstrap.css" />
    <!-- endbower -->
    <!-- endbuild -->
    <!-- build:css(.tmp) styles/main.css -->
    <link rel="stylesheet" href="styles/main.css">
    <!-- endbuild -->
  </head>
  <body>
    <!--[if lt IE 10]>
      <p class="browsehappy">You are using an <strong>outdated</strong> browser. Please <a href="http://browsehappy.com/">upgrade your browser</a> to improve your experience.</p>
    <![endif]-->


    <div class="container">
      <!-- div class="header">
        <ul class="nav nav-pills pull-right">
          <li class="active"><a href="#">Home</a></li>
          <li><a href="#">About</a></li>
          <li><a href="#">Contact</a></li>
        </ul>
        <h3 class="text-muted">dronihil</h3>
      </div> -->

      <div class="row">
        <!-- div class="col-xs-3">
	<input id="knob1" class="knob" data-cursor=false data-fgColor="#222222" data-thickness=.3 data-displayInput="false" data-min="120" data-max="1000"/>
        </div>
        <div class="col-xs-3">
	<input id="knob2" class="knob" data-cursor=false data-fgColor="#222222" data-thickness=.3 data-displayInput="false" data-min="0", data-max="100"/>
        </div -->
        <div id="bt1" class="col-xs-6 drnbt"> &nbsp; </div>
        <div id="bt2" class="col-xs-6 drnbt"> &nbsp; </div>
      </div>
      <div class="row">
        <!-- div class="col-xs-3">
	<input id="knob3" class="knob" data-cursor=false data-fgColor="#222222" data-thickness=.3 data-displayInput="false" data-min="390" data-max="5000"/>
        </div>
        <div class="col-xs-3">
	<input id="knob4" class="knob" data-cursor=false data-fgColor="#222222" data-thickness=.3 data-displayInput="false"  data-min="0", data-max="100"/>
        </div -->
        <div id="bt3" class="col-xs-6 drnbt"> &nbsp; </div>
        <div id="bt4" class="col-xs-6 drnbt"> &nbsp; </div>
      </div>
      <div class="row">
        <!-- div class="col-xs-3">
	<input id="knob5" class="knob" data-cursor=false data-fgColor="#222222" data-thickness=.3 data-displayInput="false" data-min="400" data-max="34000"/>
        </div>
        <div class="col-xs-3">
	<input id="knob6" class="knob" data-cursor=false data-fgColor="#222222" data-thickness=.3 data-displayInput="false" data-min="90" data-max="400"/>
        </div -->
        <div id="bt5" class="col-xs-6 drnbt"> &nbsp; </div>
        <div id="bt6" class="col-xs-6 drnbt"> &nbsp; </div>
      </div>
    </div>


    <!-- build:js(.) scripts/vendor.js -->
    <!-- bower:js -->
    <script src="bower_components/jquery/dist/jquery.js"></script>
    <script src="bower_components/flocking/dist/flocking-all.min.js"></script>
    <script src="bower_components/jquery-knob/js/jquery.knob.js"></script>
    <!-- endbower -->
    <!-- endbuild -->

    <script src="scripts/dronihil.js"></script>
    <script>
    var fluid = fluid || require("infusion"),
    flock = fluid.registerNamespace("flock");

    (function() {
      "use strict";

      flock.init();
      // fluid.setLogging(true);

      var $ = fluid.registerNamespace("jQuery");
      function bclick(component, target, xname, xmin, xmax, yname, ymin, ymax) {
        $(".drnbt").removeClass('btnactive');
        component.addClass('btnactive');
        $("body").mouseup(function(event) { $("body").off("mousemove"); component.removeClass("btnactive") });
        var maxw = $("body").width();
        var maxh = $("body").height();
        var xrange = xmax - xmin;
        var yrange = ymax - ymin;

        var diam = sqrt((maxw*maxw + maxh*maxh)/4.0);
        log.console("diameter: " + diam);

        $("body").mousemove(function(event) {
          var xval = xmin + (maxw/(maxw - event.pageX))*xrange;
          var yval = ymin + (maxh/event.pageY)*yrange;

          // convert to vector from centre
          var xpos = xval - (maxw/2);
          var ypos = yval - (maxy/2);

          // distance from origin (center) 0 - 1
          var d = Math.sqrt(xpos**2 + ypos**2)/diam;

          // angle - between -PI/2 and PI/2
          var a = Math.atan(ypos/xpos);

          // FIXME: use d as luminence, a as hue

          // console.log(xname + " - value: " + xval + ", " + yname + " - value: " + yval);
          target.set(xname, xval);
          target.set(yname, yval);
        });
      }
      $(function() {
        //$("#knob1").knob({ 'width': 90, 'height': 90, 'change': function(v) { dronihil.s1.set("fcarrier.freq", Math.sqrt(v)); }});
        //$("#knob2").knob({ 'width': 90, 'height': 90, 'change': function(v) { dronihil.s1.set("wwobble.freq", v/100.0);}});
       // $("#knob3").knob({ 'width': 90, 'height': 90, 'change': function(v) { dronihil.s2.set("fcarrier.freq", Math.sqrt(v));}});
       // $("#knob4").knob({ 'width': 90, 'height': 90, 'change': function(v) { dronihil.s2.set("wwobble.freq", v/100.0); }});
       // $("#knob5").knob({ 'width': 90, 'height': 90, 'change': function(v) { dronihil.s3.set("fcarrier.mul", Math.sqrt(v)); }});
       // $("#knob6").knob({ 'width': 90, 'height': 90, 'change': function(v) { dronihil.s3.set("wwobble.freq", v); }});

        $("#bt1").mousedown( function() { bclick($("#bt1"), dronihil.s1, "fcarrier.mul", 0.1, 15, "fcarrier.freq", 0.5, 20); });
        $("#bt2").mousedown( function() { bclick($("#bt2"), dronihil.s1, "wwobble.mul", 0.2, 10, "wwobble.freq", 0.001, 4); });
        $("#bt3").mousedown( function() { bclick($("#bt3"), dronihil.s2, "fcarrier.mul", 0.1, 12, "fcarrier.freq", 0.4, 12); });
        $("#bt4").mousedown( function() { bclick($("#bt4"), dronihil.s2, "wwobble.mul", 0.2, 5, "wwobble.freq", 0.001, 4); });
        $("#bt5").mousedown( function() { bclick($("#bt5"), dronihil.s3, "fcarrier.mul", 0.1, 10, "fcarrier.freq", 0.2, 10); });
        $("#bt6").mousedown( function() { bclick($("#bt6"), dronihil.s3, "wwobble.mul", 0.1, 4, "wwobble.freq", 0.001, 1); });
        

      } );
    }());

    dronihil.play();
    </script>


        <!-- build:js(.) scripts/plugins.js -->
        <script src="bower_components/bootstrap/js/affix.js"></script>
        <script src="bower_components/bootstrap/js/alert.js"></script>
        <script src="bower_components/bootstrap/js/dropdown.js"></script>
        <script src="bower_components/bootstrap/js/tooltip.js"></script>
        <script src="bower_components/bootstrap/js/modal.js"></script>
        <script src="bower_components/bootstrap/js/transition.js"></script>
        <script src="bower_components/bootstrap/js/button.js"></script>
        <script src="bower_components/bootstrap/js/popover.js"></script>
        <script src="bower_components/bootstrap/js/carousel.js"></script>
        <script src="bower_components/bootstrap/js/scrollspy.js"></script>
        <script src="bower_components/bootstrap/js/collapse.js"></script>
        <script src="bower_components/bootstrap/js/tab.js"></script>
        <!-- endbuild -->

        <script src="bower_components/jquery-color/jquery.color.js "></script>

        <!-- build:js({app,.tmp}) scripts/main.js -->
        <script src="scripts/main.js"></script>
        <!-- endbuild -->
</body>
</html>
