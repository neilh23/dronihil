function feedvals(a,b,c){"use strict";var d=dronihil.autoData[a.attr("id")],e=d.target,f=d.xmin+b*d.xrange,g=d.ymin+c*d.yrange;e.set(d.xname,f),e.set(d.yname,g);var h=2*b-1,i=2*c-1,j=Math.sqrt(b*b+c*c),k=.5+Math.atan(i/h)/Math.PI;a.css("background",jQuery.Color({hue:359*k,saturation:.1+j/16,lightness:.3*j}))}function bclick(a){"use strict";if(dronihil.started!==!0){flock.enviro.shared.play();var b=flock.enviro.shared.audioStrategy;if(b.model.shouldInitIOS){var c=b.source;(c.start||c.noteOn).call(b.source,0),(c.stop||c.noteOff).call(b.source,0),b.model.shouldInitIOS=!1}dronihil.started=!0}if(!a.clicked){a.clicked=!0,$(".drnbt").removeClass("btnactive"),a.addClass("btnactive");var d=a.attr("id");dronihil.recording=d,$("body").on("mouseup mouseleave touchend touchcancel",function(){$("body").off("mousemove touchmove"),a.clicked=!1,a.removeClass("btnactive"),dronihil.recording=void 0});var e=$("body").width(),f=$("body").height();$("body").on("mousemove touchmove",function(a){var b,c;void 0!==a.originalEvent.touches?(b=a.originalEvent.touches[0].pageX,c=a.originalEvent.touches[0].pageY):(b=a.pageX,c=a.pageY),dronihil.recordVal={xval:(e-b)/e,yval:c/f}})}}function procAuto(){"use strict";var a,b=dronihil.recording;for(var c in dronihil.auto)if(c!==b){a=dronihil.place[c];var d=dronihil.auto[c],e=d[a];e&&(feedvals(dronihil.autoData[c].component,d[a].xval,d[a].yval),dronihil.place[c]=++a>=d.length?0:a)}if(b){var f=dronihil.recordVal;if(f){var g=dronihil.auto[b]||(dronihil.auto[b]=[]);a=g.length,g[a]=f,dronihil.place[c]=a,feedvals(dronihil.autoData[b].component,f.xval,f.yval)}}}var fluid,flock,dronihil=fluid.registerNamespace("dronihil");!function(){"use strict";dronihil.auto={},dronihil.autoData={},dronihil.place={},dronihil.addAuto=function(a){var b=a.component;b.on("mousedown touchstart",function(a){a.preventDefault(),a.stopImmediatePropagation(),bclick(b)}),a.xrange=a.xmax-a.xmin,a.yrange=a.ymax-a.ymin,dronihil.autoData[b.attr("id")]=a,feedvals(b,Math.random(),Math.random())},dronihil.play=function(){dronihil.s1=flock.synth({synthDef:{id:"carrier",ugen:"flock.ugen.triOsc",freq:{id:"fcarrier",ugen:"flock.ugen.sinOsc",freq:.25,add:190,mul:32},mul:{id:"wobble",ugen:"flock.ugen.sinOsc",freq:{id:"wwobble",ugen:"flock.ugen.sinOsc",freq:.01,add:1.8,mul:1.7},add:.3,mul:.3}}}),dronihil.s2=flock.synth({synthDef:{id:"carrier",ugen:"flock.ugen.sin",freq:{id:"fcarrier",ugen:"flock.ugen.sinOsc",freq:.25,add:120,mul:35},mul:{id:"wobble",ugen:"flock.ugen.sinOsc",freq:{id:"wwobble",ugen:"flock.ugen.sinOsc",freq:.06,add:2.5,mul:1.5},add:.3,mul:.3}}}),dronihil.s3=flock.synth({synthDef:{id:"carrier",ugen:"flock.ugen.sinOsc",freq:{id:"dcarrier",ugen:"flock.ugen.sinOsc",freq:{id:"fcarrier",ugen:"flock.ugen.lfNoise",freq:220,add:59,mul:8.5},add:80,mul:110},mul:{id:"wobble",ugen:"flock.ugen.sinOsc",freq:{id:"wwobble",ugen:"flock.ugen.sinOsc",freq:.06,add:90,mul:1.5},add:.55,mul:.2}}}),setInterval(function(){procAuto()},100)}}();